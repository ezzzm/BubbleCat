---
// src/components/Live2DWidget.astro
// 这个组件只负责创建 iframe，将 Live2D 的“独立世界”嵌入到主页面。
---
<script is:inline>
    // 确保脚本只在客户端、PC端、并且在整个网站生命周期内只执行一次
    if (typeof window !== 'undefined' && !window.live2dIframeLoaded && window.innerWidth >= 768) {
        window.live2dIframeLoaded = true; // 设置全局标志，防止重复创建

        const iframe = document.createElement('iframe');
        iframe.src = '/live2d.html';
        iframe.id = 'live2d-iframe';
        iframe.setAttribute('frameborder', '0');
        iframe.setAttribute('scrolling', 'no');
        
        // --- 设置 iframe 的样式 ---
        iframe.style.position = 'fixed';
        iframe.style.bottom = '0';
        iframe.style.left = '0';
        iframe.style.width = '280px';  // 您可以根据需要调整
        iframe.style.height = '350px'; // 您可以根据需要调整
        iframe.style.border = 'none';
        iframe.style.zIndex = '99999'; // 确保在所有内容的顶层
        iframe.style.pointerEvents = 'auto'; // 允许与 iframe 及其内部内容进行交互

        document.body.appendChild(iframe);
    }
</script>